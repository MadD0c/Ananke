#####################
[gcode_macro _mom600cfg]
#####################

# CONFIGURE YOUR PREFERRED DEFAULT VALUES INSIDE THIS GCODE_MACRO
# Couldn't find anywhere if or how it's possible to define a config section
# Would have been much nicer to deal with, maybe one day i'll find out :)
# Leave me a hint if you know how.

variable_default_temp: 220
# Default temperature to heat up if M600 issued in terminal
# Ignored if a target temperature is already set at launch ( M104 / M109 )
# or started within a printjob

variable_cooldown: 1
# Wether the hotende should cool down or not when pause started
# 1 - Hotend cools down when paused ( Recommended for security reasons and saves some energy if 
#     you're away a longer period of time and therefore can't change the filament)
# 0 - Hotend stays hot ( Not recommended, you never know... )

variable_x: 300
variable_y: 150
# Coordinates to park hotend at (as absolute values)

variable_z: 10
# mm to raise z from current height (this is a relative value!)

variable_zmin: 70
# if current z height is below zmin (as an absolute value), head will lift zmin ( as relative value) instead z
# making it easier to clean the nozzle at that height

variable_load_fast: 6
# mm to load filament at fast speed (length of bowden-hotend-purge)

variable_load_slow: 1
# mm to load filament after fast speed slowly into the hotend incl. purge

variable_bowden: 25
# total mm to unload filament (all at high speed)

variable_speed_1: 6000
# Speed at which filament is loaded/unloaded

variable_speed_2: 9000
# Speed at which hotend is moved to park position

variable_purge: 20
# Possibility to extract xx mm filament after loading if loading was too short f.e.

variable_output: 118
#Additional output send via M117 or M118

# !-ATTENTION--------------------------------------------------------!
# !								     !
# ! Uncomment the desired language / Comment ( Delete ) the other    !
# ! If you edit the language please don't use special characters     !
# ! like Ü,Ö,Ä, Ǣ or É in your language,macro will not work and show !
# ! a UnicodeDecodeError: 'ascii' ... 		                     !
# !------------------------------------------------------------------!

# Textdata HTML UI deutsch (german)
#variable_step_a1: "<CENTER><P><B>SCHRITT 1/3 </B></P><H2>ZEIT ZU WECHSELN</H2>"
#variable_step_b1:"Achtung, der Druckkopf ist ggfs. heiss!<dl><dt>"
#variable_step_c1:"Die Temperatur wurde zur Sicherheit auf 0 gesetzt<dl><dt>"
#variable_step_d1:"Klicke <b>WEITER</B> um (wieder) aufzuheizen<BR> Klipper wird anschliessend das Filament entladen<BR><BR>"

#variable_step_2: "<CENTER><P><B>SCHRITT 2/3</B></P><B>Lade jetzt das neue Filament und klicke auf WEITER<BR><BR>( +/- 10mm in den PTFE Schlauch)"
#variable_step_3: "<CENTER><P><B>SCHRITT 3/3</B></P><B>Reinige den Druckkopf, klicke dann WEITER um mit dem Druck fortzufahren oder ZURUECK um zum vorherigen Schritt 2 zu gelangen."
#variable_next: "WEITER"
#variable_previous: "ZURUECK"
#variable_cancel: "ABBRUCH"
#variable_purgetext: "EXTRAHIERE"

# Textdata HTML UI english
variable_step_a1: "<CENTER><P><B>STEP 1/3 </B></P><H2>TIME TO CHANGE</H2>"
variable_step_b1:"Beware, the nozzle could be hot! <dl><dt>"
variable_step_c1:"Temperature set to 0 for security reasons<dl><dt>"
variable_step_d1:"Click <b>NEXT</B> to heat up (again)<BR> Klipper will then unload the filament<BR><BR>"
variable_step_2: "<CENTER><P><B>STEP 2/3</B></P><B>Load the new filament and click NEXT<BR><BR>( +/- 10mm into PTFE tube)"
variable_step_3: "<CENTER><P><B>STEP 3/3</B></P><B>Wipe nozzle clean, then click NEXT to resume print or click BACK to unload again and return to step 2"
variable_next: "NEXT"
variable_previous: "BACK"
variable_cancel: "CANCEL"
variable_purgetext: "EXTRACT"

gcode:

  #-# * * * THERE SHOULD BE NO NEED TO EDIT ANYTHING BELOW THIS POINT * * * #-#

#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=default_temp VALUE={default_temp}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=cooldown VALUE={cooldown}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=x VALUE={x}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=y VALUE={y}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=z VALUE={z}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=zmin VALUE={zmin}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=retract_fast VALUE={retract_fast}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=retract_slow VALUE={retract_slow}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=speed_1 VALUE={speed_1}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=speed_2 VALUE={speed_2}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=purge VALUE={purge}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=output VALUE={output}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=step_a1 VALUE={step_a1}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=step_b1 VALUE={step_b1}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=step_v1 VALUE={step_c1}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=step_d1 VALUE={step_d1}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=step_2 VALUE={step_2}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=step_3 VALUE={step_3}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=next VALUE={next}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=previous VALUE={previous}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=cancel VALUE={cancel}
#  SET_GCODE_VARIABLE MACRO=m600cfg VARIABLE=purgetext VALUE={purgetext}
