[delayed_gcode _UPDATE_KAMP_Settings]
initial_duration: 1
gcode:
  {% set defaultcfg = printer['gcode_macro _defaultcfg'] %}
  {% if defaultcfg.kamp == True %}
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=verbose_enable VALUE=defaultcfg.kamp_verbose_enable
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=mesh_margin VALUE=defaultcfg.kamp_mesh_margin
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=fuzz_amount VALUE=defaultcfg.kamp_fuzz_amount
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=probe_dock_enable VALUE=defaultcfg.docking_probe
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=attach_macro VALUE=defaultcfg.kamp_attach_macro
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=detach_macro VALUE=defaultcfg.kamp_dock_macro
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=purge_height VALUE=defaultcfg.kamp_purge_height
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=purge_margin VALUE=defaultcfg.kamp_purge_margin
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=purge_amount VALUE=defaultcfg.kamp_purge_amount
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=flow_rate VALUE=defaultcfg.kamp_flow_rate
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=smart_park_height VALUE=defaultcfg.kamp_smart_park_height
  {% endif %}
