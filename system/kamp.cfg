[delayed_gcode _UPDATE_KAMP_Settings]
initial_duration: 1
gcode:
  {% set defaultcfg = printer['gcode_macro _defaultcfg'] %}
  {% if defaultcfg.kamp == True %}
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=verbose_enable VALUE=defaultcfg.verbose_enable
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=mesh_margin VALUE=defaultcfg.mesh_margin
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=fuzz_amount VALUE=defaultcfg.fuzz_amount
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=probe_dock_enable VALUE=defaultcfg.probe_dock_enable
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=detach_macro VALUE=defaultcfg.detach_macro
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=purge_height VALUE=defaultcfg.purge_height
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=purge_margin VALUE=defaultcfg.purge_margin
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=purge_amount VALUE=defaultcfg.purge_amount
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=flow_rate VALUE=defaultcfg.flow_rate
    SET_GCODE_VARIABLE MACRO=_KAMP_Settings VARIABLE=smart_park_height VALUE=defaultcfg.smart_park_height
  {% endif %}
